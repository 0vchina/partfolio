<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Проекты — Виталий Овчинников</title>

  <link rel="canonical" href="https://0vchina.github.io/partfolio/projects.html" />
  <meta name="description" content="3D модели, визуализации, реальные объекты и инженерные решения." />

  <!-- Шрифты -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet" />

  <style>
    :root { --header-offset: 80px; --accent:#1CAAD9; --panel-bg: rgba(255,255,255,.78); --panel-brd: rgba(0,0,0,.08); --panel-shadow: 0 8px 32px rgba(0,0,0,.18); }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Inter',sans-serif;
      color:#111;
      background: url('a2.webp') center center / cover no-repeat fixed;
      overflow-x:hidden;
    }

    /* Header */
    header{background:#fff7;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);position:sticky;top:0;z-index:1000;border-bottom:1px solid var(--panel-brd);padding:10px 14px}
    .wrap{max-width:1200px;margin:0 auto;padding:0 12px}
    h1{font-family:'Montserrat',sans-serif;font-size:2rem;margin:.4rem 0;font-weight:800; letter-spacing:.2px; text-shadow:0 1px 2px rgba(255,255,255,.9)}
    nav a{margin-right:14px;text-decoration:none;font-weight:600;color:#0d0d0d;border-bottom:2px solid transparent;padding-bottom:2px}
    nav a:hover{border-color:var(--accent)}

    /* Sections */
    section{padding:1.6rem 1.2rem;margin:1.2rem auto;background:var(--panel-bg);border:1px solid var(--panel-brd);border-radius:14px;box-shadow:var(--panel-shadow);max-width:1100px}
    section[id]::before{content:"";display:block;height:var(--header-offset);margin-top:calc(-1 * var(--header-offset));visibility:hidden}
    h2{font-family:'Montserrat',sans-serif;font-size:1.4rem;line-height:1.3;font-weight:700;letter-spacing:.2px;margin:0 0 .8rem}

    /* 3D модели: сразу iframe, адаптивная сетка */
    .models-grid{display:grid;gap:1rem}
    .models-grid iframe{
      width:100%; height:400px; border:0; border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,.15); background:#000;
    }
    @media (min-width:768px){ .models-grid{grid-template-columns:repeat(2,1fr)} }
    @media (min-width:1200px){ .models-grid{grid-template-columns:repeat(3,1fr)} }

    /* Renders grid */
    .renders-grid{display:flex;gap:1rem;overflow-x:auto;padding-bottom:1rem;scrollbar-width:thin}
    .render-thumb{flex-shrink:0;width:280px;height:180px;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.2);cursor:zoom-in;position:relative;background:#f3f3f3;border:1px solid var(--panel-brd)}
    .render-thumb img{width:100%;height:100%;object-fit:cover;display:block}
    @media (min-width: 900px){
      .renders-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;overflow-x:visible;padding-bottom:0}
      .render-thumb{width:100%;height:200px}
    }

    /* FAB */
    .contact-fab{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:10px;z-index:1001}
    .fab-btn{display:inline-flex;align-items:center;gap:8px;text-decoration:none;background:#fff;border:1px solid var(--panel-brd);box-shadow:0 8px 20px rgba(0,0,0,.15);padding:10px 14px;border-radius:999px;font-weight:700;color:#111;backdrop-filter:blur(6px)}
    .fab-btn:hover{transform:translateY(-1px);box-shadow:0 10px 24px rgba(0,0,0,.18)}

    footer{ text-align:center; color:#fff; padding:24px; margin: 18px auto 24px; background: rgba(0,0,0,.65); border-radius:12px; max-width:1100px; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Проекты</h1>
      <nav>
        <a href="index.html">Главная</a>
        <a href="#projects">3D модели</a>
        <a href="#renders">Визуализации</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- 3D Модели — без превью, сразу iframe (в сетке) -->
    <section id="projects">
      <h2>3D Модели</h2>
      <div class="models-grid">
        <iframe title="3D модель 1" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/084cad3643db4e4e8eaba72e629140ac/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 2" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/ba839c7fda4f4fb89e2c1d18a2c1526c/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 3" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/eafec3893bcb43b682ab2377f32ddcef/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 4" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/e331aef5a1cb4ed38da9c9539499aced/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 5" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/89d073bcf42c4eec87f4590ce6e25092/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 6" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/bbff07d90f474439860a53789f130a2b/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 7" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/7f768bd3cee64d979c5fb96b96b2beb0/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 8" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/4c69c03d217f4bb6ad082e9a080c386c/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 9" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/9c55246691b44ee8a069a30d75322ed9/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 10" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/deef518c17884aaf89432efcb1236a13/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 11" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/a9fb81fce32d4bd6bf86a720d5458c96/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 12" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/6d44da7b1c89421c820dba806a988640/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 13" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/7312b16ac3b242269e0994a03530345f/embed?transparent=1&ui_theme=dark"></iframe>

        <iframe title="3D модель 14" allow="autoplay; fullscreen; xr-spatial-tracking" mozallowfullscreen webkitallowfullscreen
          src="https://sketchfab.com/models/0c33ff5138b847df80d8f24711ec1733/embed?transparent=1&ui_theme=dark"></iframe>
      </div>
    </section>

    <!-- Визуализации -->
    <section id="renders">
      <h2>Визуализации</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="1.webp" alt="Визуализация 1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="5.webp" alt="Визуализация 2" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="7.webp" alt="Визуализация 3" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="Камертон планы 16.07.2024 - Изображение4-1.webp" alt="Камертон 16.07.2024 — вид 4-1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="Камертон планы 27.07.2024 - Изображение2.webp" alt="Камертон 27.07.2024 — вид 2" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>

    <section id="house">
      <h2>Жилой дом</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="22.webp" alt="Жилой дом — вид 22" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="11.webp" alt="Жилой дом — вид 11" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>

    <section id="dorm-minsk">
      <h2>Общежитие Минск</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="111.webp" alt="Общежитие Минск — 111" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="222.webp" alt="Общежитие Минск — 222" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="333.webp" alt="Общежитие Минск — 333" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>

    <section id="beam-strengthening">
      <h2>Усиление несущей балки</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="1111.webp" alt="Усиление балки — 1111" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="2222.webp" alt="Усиление балки — 2222" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="3333.webp" alt="Усиление балки — 3333" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="4444.webp" alt="Усиление балки — 4444" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="5555.webp" alt="Усиление балки — 5555" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>

    <section id="slabs-carbon">
      <h2>Усиление плит углеволокном</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="uc1.webp" alt="Углеволокно — плита, вариант 1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="uc2.webp" alt="Углеволокно — плита, вариант 2" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>

    <section id="supermarket-de">
      <h2>Супермаркет в Германии</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="11111.webp" alt="Супермаркет DE — 11111" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="22222.webp" alt="Супермаркет DE — 22222" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="33333.webp" alt="Супермаркет DE — 33333" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="44444.webp" alt="Супермаркет DE — 44444" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="55555.webp" alt="Супермаркет DE — 55555" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
      <p style="margin-top:1rem; font-weight:600;">📍 Адрес: <a href="https://www.google.com/maps?q=51.47207375941072,6.956863035249297" target="_blank" rel="noopener">Germany</a></p>
    </section>

    <section id="firestation-de">
      <h2>Пожарная часть в Германии</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="111111.webp" alt="Пожарная часть DE — 111111" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="222222.webp" alt="Пожарная часть DE — 222222" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
      <p style="margin-top:1rem; font-weight:600;">📍 Адрес: <a href="https://www.google.com/maps?q=51.37914501942016,7.508993444647588" target="_blank" rel="noopener">Germany</a></p>
    </section>

    <section id="school-de">
      <h2>Школа в Германии</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="112.webp" alt="Школа DE — вид 1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="113.webp" alt="Школа DE — вид 2" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="114.webp" alt="Школа DE — вид 3" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
      <p style="margin-top:1rem; font-weight:600;">📍 Адрес: <a href="https://www.google.com/maps?q=50.905589556277164,7.534640352935026" target="_blank" rel="noopener">Germany</a></p>
    </section>

    <section id="clinic-de">
      <h2>Клиника в Германии</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="gl1.webp" alt="Клиника DE — gl1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="gl2.webp" alt="Клиника DE — gl2" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="gl3.webp" alt="Клиника DE — gl3" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="gl4.webp" alt="Клиника DE — gl4" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
      <p style="margin-top:1rem; font-weight:600;">📍 Адрес: <a href="https://www.google.com/maps?q=49.15349373699453,11.71859724105959" target="_blank" rel="noopener">Germany</a></p>
    </section>

    <section id="houses-de">
      <h2>Частные дома в Германии по технологии Viebrockhaus</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="d9.webp" alt="Viebrockhaus — d9" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d11.webp" alt="Viebrockhaus — d11" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d2.webp"  alt="Viebrockhaus — d2"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d3.webp"  alt="Viebrockhaus — d3"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d4.webp"  alt="Viebrockhaus — d4"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d5.webp"  alt="Viebrockhaus — d5"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d6.webp"  alt="Viebrockhaus — d6"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d7.webp"  alt="Viebrockhaus — d7"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d8.webp"  alt="Viebrockhaus — d8"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d1.webp"  alt="Viebrockhaus — d1"  loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d10.webp" alt="Viebrockhaus — d10" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="d12.webp" alt="Viebrockhaus — d12" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>

    <section id="russia-old">
      <h2>Россия (давно)</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="cpb1.webp" alt="Проект Россия — cpb1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="cpb2.webp" alt="Проект Россия — cpb2" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>
    
    <section id="work">
      <h2>Интересные скины с моих расчётов</h2>
      <div class="renders-grid">
        <div class="render-thumb"><img src="Ol1.webp" alt="Проект — Ol1" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="Ol2.webp" alt="Проект — Ol2" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="Ol3.webp" alt="Проект — Ol3" loading="lazy" decoding="async" fetchpriority="low"></div>
        <div class="render-thumb"><img src="Ol4.webp" alt="Проект — Ol4" loading="lazy" decoding="async" fetchpriority="low"></div>
      </div>
    </section>
  </main>

  <footer>© 2025 Виталий Овчинников — Проекты</footer>

  <!-- FAB -->
  <div class="contact-fab" aria-label="Быстрые контакты">
    <a class="fab-btn" href="index.html#contact" aria-label="Открыть контакты — Telegram">💬 Telegram</a>
    <a class="fab-btn" href="index.html#contact" aria-label="Открыть контакты — Email">✉️ Email</a>
  </div>

  <!-- Попап полноэкранного просмотра изображений -->
  <div class="popup-overlay" id="imagePopup" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.86); z-index:9999; align-items:center; justify-content:center;">
    <span class="close-btn" id="popupClose" style="position:absolute;top:16px;right:20px;font-size:2rem;color:#fff;cursor:pointer">&times;</span>
    <div class="popup-content" id="popupContent" style="position:relative; max-width:92vw; max-height:92vh; display:flex; align-items:center; justify-content:center; touch-action:none;">
      <img id="popupImage" class="popup-canvas" src="" alt="Просмотр изображения" style="max-width:92vw; max-height:92vh; object-fit:contain; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.4); transform-origin:center center; user-select:none; -webkit-user-drag:none; cursor:grab;">
      <div class="popup-toolbar" role="toolbar" aria-label="Управление масштабом" style="position:absolute;bottom:16px;left:50%;transform:translateX(-50%);background:rgba(20,20,20,.6);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.15);border-radius:999px;display:flex;gap:8px;padding:6px 10px;">
        <button type="button" id="prevImage">‹</button>
        <button type="button" id="zoomOut">–</button>
        <span class="popup-zoom-indicator" id="zoomLabel" style="color:#fff;min-width:56px;text-align:center;font-weight:600">100%</span>
        <button type="button" id="zoomIn">+</button>
        <button type="button" id="zoomReset">100%</button>
        <button type="button" id="nextImage">›</button>
        <button type="button" id="popupClose2">Закрыть</button>
      </div>
    </div>
  </div>

  <script>
    // === Попап изображений: зум/перетаскивание/перелистывание ===
    const overlayP = document.getElementById('imagePopup');
    const imgEl = document.getElementById('popupImage');
    const content = document.getElementById('popupContent');
    const closeBtn = document.getElementById('popupClose');
    const closeBtn2 = document.getElementById('popupClose2');
    const zoomInBtn = document.getElementById('zoomIn');
    const zoomOutBtn = document.getElementById('zoomOut');
    const zoomResetBtn = document.getElementById('zoomReset');
    const zoomLabel = document.getElementById('zoomLabel');
    const prevBtnImg = document.getElementById('prevImage');
    const nextBtnImg = document.getElementById('nextImage');

    let scale = 1, pos = { x:0, y:0 }, isPanning=false, start={x:0,y:0};
    const previewImgs = Array.from(document.querySelectorAll('.render-thumb img'));
    let currentIndex = -1;

    function openPopup(src, alt=''){
      currentIndex = previewImgs.findIndex(el => el.src === src);
      imgEl.src = src; imgEl.alt = alt || 'Просмотр изображения';
      overlayP.style.display='flex'; document.body.style.overflow='hidden';
      resetTransform(); updateNavButtons();
    }
    function closePopup(){ overlayP.style.display='none'; document.body.style.overflow=''; imgEl.src=''; currentIndex=-1; }
    function resetTransform(){ scale=1; pos={x:0,y:0}; applyTransform(); }
    function applyTransform(){ imgEl.style.transform = `translate(${pos.x}px, ${pos.y}px) scale(${scale})`; zoomLabel.textContent = Math.round(scale*100)+'%'; imgEl.style.cursor = scale>1 ? (isPanning?'grabbing':'grab') : 'default'; }
    function zoomAt(px,py,ds){ const p=scale; scale=Math.min(6,Math.max(0.2,scale*ds)); const r=imgEl.getBoundingClientRect(); const cx=r.left+r.width/2, cy=r.top+r.height/2; const dx=px-cx, dy=py-cy; pos.x -= dx*(scale/p-1); pos.y -= dy*(scale/p-1); applyTransform(); }
    function showByIndex(i){ if(i<0||i>=previewImgs.length) return; currentIndex=i; const el=previewImgs[i]; imgEl.src=el.src; imgEl.alt=el.alt||''; resetTransform(); updateNavButtons(); }
    function nextImage(){ if(currentIndex===-1) return; showByIndex((currentIndex+1)%previewImgs.length); }
    function prevImage(){ if(currentIndex===-1) return; showByIndex((currentIndex-1+previewImgs.length)%previewImgs.length); }
    function updateNavButtons(){ const many=previewImgs.length>1; prevBtnImg.disabled=!many; nextBtnImg.disabled=!many; }

    document.querySelectorAll('.render-thumb img').forEach(img => img.addEventListener('click', () => openPopup(img.src, img.alt)));
    closeBtn.addEventListener('click', closePopup); closeBtn2.addEventListener('click', closePopup);
    overlayP.addEventListener('click', e => { if(e.target===overlayP) closePopup(); });
    window.addEventListener('keydown', e => {
      if(e.key==='Escape') closePopup();
      if(overlayP.style.display==='flex'){
        if(e.key==='ArrowRight') nextImage();
        if(e.key==='ArrowLeft')  prevImage();
        if(e.key==='+')          zoomAt(innerWidth/2, innerHeight/2, 1.2);
        if(e.key==='-')          zoomAt(innerWidth/2, innerHeight/2, 1/1.2);
      }
    });
    zoomInBtn.addEventListener('click', () => zoomAt(innerWidth/2, innerHeight/2, 1.2));
    zoomOutBtn.addEventListener('click', () => zoomAt(innerWidth/2, innerHeight/2, 1/1.2));
    zoomResetBtn.addEventListener('click', resetTransform);
    nextBtnImg.addEventListener('click', nextImage);
    prevBtnImg.addEventListener('click', prevImage);

    content.addEventListener('wheel', e => { e.preventDefault(); zoomAt(e.clientX, e.clientY, e.deltaY<0?1.1:1/1.1); }, {passive:false});
    content.addEventListener('dblclick', e => { if(scale<=1.01) zoomAt(e.clientX,e.clientY,2); else resetTransform(); });
    content.addEventListener('pointerdown', e => { if(scale<=1.01) return; isPanning=true; start={x:e.clientX-pos.x, y:e.clientY-pos.y}; imgEl.setPointerCapture(e.pointerId); applyTransform(); });
    content.addEventListener('pointermove', e => { if(!isPanning) return; pos.x=e.clientX-start.x; pos.y=e.clientY-start.y; applyTransform(); });
    content.addEventListener('pointerup', e => { isPanning=false; imgEl.releasePointerCapture(e.pointerId); applyTransform(); });
  </script>
</body>
</html>
