<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Калькулятор ветровой нагрузки · СН 2.01.05‑2019 (FULL)</title>
  <style>
    body{margin:0; font-family:Inter,system-ui,Arial,sans-serif; background:#0b1020; color:#eaf1ff}
    .container{max-width:1200px; margin:auto; padding:20px}
    .card{background:#111730; border:1px solid rgba(255,255,255,.08); border-radius:14px; margin-bottom:16px; box-shadow:0 6px 18px rgba(0,0,0,.35)}
    .card h2{margin:0; padding:12px 16px; border-bottom:1px solid rgba(255,255,255,.08)}
    .card .bd{padding:16px}
    details{background:#0c1435; border-radius:10px; padding:8px 12px; margin-top:8px}
    summary{cursor:pointer; color:#8ab4ff}
    img,svg{max-width:100%; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,.4)}
    .print-only{display:none}
    @media print{
      .print-only{display:block}
      button,header,.floatbar{display:none!important}
      body{background:#fff;color:#000}
      .card{background:#fff;border:1px solid #ccc;box-shadow:none}
    }
    .zone-label{font-size:12px; color:#b7c4e0; margin:6px 0 10px}
  </style>
</head>
<body>
  <div class="container">
    <header style="margin-bottom:16px">
      <h1>Калькулятор ветровой нагрузки</h1>
    </header>

    <section class="card">
      <h2>Входные данные</h2>
      <div class="bd">
        <!-- Форма расчёта -->
        <p>Форма ввода данных…</p>
      </div>
    </section>

    <section class="card">
      <h2>Результаты</h2>
      <div class="bd" id="results">
        <p class="zone-label">Зоны стен: A/B/C — боковые, D — наветренная, E — подветренная</p>
        <p class="zone-label">Зоны плоской кровли: F — наветренная кромка, G — боковые/подветренная, H — центр</p>
        <p class="zone-label">Зоны двускатной кровли θ=90°: F,G,H,I; θ=0°: F,G,H,I,J</p>
        <p>Здесь будут результаты расчёта…</p>
      </div>
    </section>

    <section class="card">
      <h2>Справка</h2>
      <div class="bd">
        <details open>
          <summary>Карта ветровых районов РБ (схема)</summary>
          <div>
            <svg id="regionsMapSvg" class="svg-card" viewBox="0 0 640 360" role="img" aria-label="Схематичная карта ветровых районов"></svg>
            <div class="muted">Схема для ориентира: I / II / III. Точные значения vb,0 задаются в вашем проекте.</div>
          </div>
        </details>
        <details>
          <summary>Графики профиля ветра (c_r, v_m, I_v, q_p)</summary>
          <div class="charts">
            <svg id="chart-cr" class="svg-card" viewBox="0 0 640 220" aria-label="График c_r(z)"></svg>
            <svg id="chart-vm" class="svg-card" viewBox="0 0 640 220" aria-label="График v_m(z)"></svg>
            <svg id="chart-iv" class="svg-card" viewBox="0 0 640 220" aria-label="График I_v(z)"></svg>
            <svg id="chart-qp" class="svg-card" viewBox="0 0 640 220" aria-label="График q_p(z)"></svg>
          </div>
        </details>
      </div>
    </section>

    <section class="card print-only">
      <h2>Подробный отчёт (формулы)</h2>
      <div class="bd" id="report">—</div>
    </section>

    <div class="floatbar">
      <button onclick="window.print()">Печать / PDF</button>
    </div>
  </div>

  <script>
    function renderCharts(){
      const charts=[{id:'chart-cr',label:'c_r(z)',fn:(z,z0)=>0.19*Math.log(z/z0)},{id:'chart-vm',label:'v_m(z)',fn:(z,z0)=>0.19*Math.log(z/z0)*24},{id:'chart-iv',label:'I_v(z)',fn:(z,z0)=>1/Math.log(z/z0)},{id:'chart-qp',label:'q_p(z)',fn:(z,z0)=>0.5*1.25*Math.pow(0.19*Math.log(z/z0)*24,2)}];
      const z0=0.05;
      charts.forEach(ch=>{
        const svg=document.getElementById(ch.id); if(!svg) return; svg.innerHTML='';
        const w=600,h=300,pad=30; const maxZ=60; const maxY= Math.max(...Array.from({length:50},(_,i)=>ch.fn(1+i*(maxZ-1)/49,z0)));
        const path=document.createElementNS('http://www.w3.org/2000/svg','path');
        let d='';
        for(let i=1;i<=50;i++){
          const z=1+i*(maxZ-1)/49; const y=ch.fn(z,z0); const xCoord=pad+(z/maxZ)*(w-2*pad); const yCoord=h-pad-(y/maxY)*(h-2*pad);
          d+=(i===1?'M':'L')+xCoord+','+yCoord;
        }
        path.setAttribute('d',d); path.setAttribute('stroke','#8ab4ff'); path.setAttribute('fill','none'); svg.appendChild(path);
        const text=document.createElementNS('http://www.w3.org/2000/svg','text'); text.textContent=ch.label; text.setAttribute('x',w-pad); text.setAttribute('y',pad); text.setAttribute('fill','#8ab4ff'); svg.appendChild(text);
      });
    }
    window.addEventListener('load', renderCharts);
  </script>
</body>
</html>
